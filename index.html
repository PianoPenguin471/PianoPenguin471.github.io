<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <style>
        body {
            text-align: center;
            background-image: url("https://cdn.discordapp.com/attachments/910939198826102845/917893677676908595/1389374582.png");
        }
    </style>
</head>
<body>
    <input type="text" name="addName" id="addName">
    <button onclick="removeName(getName())">Remove name</button>
    <button onclick="getRandomName(names)">Get random name</button> 
<button onclick="addName(getName())">Add name to list</button>
    <div id="output">Student name: </div>
    <br>
    <input type="file" name="nameFile" id="nameFile">
    <br>
    <br>
    <img src="https://images-ext-1.discordapp.net/external/cpQXWJiz8Jh7E1J-x114LeyOZXheYjA40tQzmFYzxAA/https/generated.inspirobot.me/a/b5eAjGZmJl.jpg?width=586&height=586"></img>
    <script>
        const shuffleArray = array => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                const temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
        var names = []
        var premiumNames = ["Daniel Christiansen", "Kevin Vanwormer", "Zachary DiGioia"]
        // Weebly bypass stuffs
        document.title = "Random Name Chooser"
        document.body.onload = e => document.getElementById("weebly-footer-signup-container-v3").innerHTML = ""
        function setFavicon(favImg){
            let headTitle = document.querySelector('head');
            let setFavicon = document.createElement('link');
            setFavicon.setAttribute('rel','shortcut icon');
            setFavicon.setAttribute('href',favImg);
            headTitle.appendChild(setFavicon);
        }
        setFavicon('https://github.com/PianoPenguin471/PianoPenguin471.github.io/blob/main/download.png?raw=true');

        const output = document.getElementById("output")
        function getRandomName(nameList) {
            let name = names.shift()
            if (name == undefined) name = "Names depleted"
            if (premiumNames.includes(name) && !isListOnlyPremium()) {
                names.push(name)
                getRandomName(names)
                return
            }
            output.innerText = "Name chosen: " + name
            return name
        }
        function addName(name) {
            names.push(name)
        }

        function isListOnlyPremium() {
            for (var i=0;i<names.length;i++) {
                elem = names[i]
                if (!(premiumNames.includes(elem))) {
                    return false
                }
            }
            return true
        }

        function removeName(userInputName) {
        names.forEach(name => {
            if (name.toLowerCase().includes(userInputName.toLowerCase())) {
            names.splice(names.indexOf(name), 1)
            }
        })
        }

        function getName() {
        let name = document.getElementById("addName").value
        document.getElementById("addName").value = ""
        return name
        }

        document.getElementById('nameFile')
        .addEventListener('change', getFile)

        function getFile(event) {
            const input = event.target
            document.title = "Random Name Chooser"
            if ('files' in input && input.files.length > 0) {
                const reader = new FileReader()
                new Promise((resolve, reject) => {
                    reader.onload = event => resolve(event.target.result)
                    reader.onerror = error => reject(error)
                    reader.readAsText(input.files[0])
            }).then(content => {names=content.replaceAll("\n", "").split(",");shuffleArray(names)}).catch(error => console.error(error))
        }
        }

        function placeFileContent(file) {
            readFileContent(file).then(content => {
            names = content.split(",")
        }).catch(error => console.log(error))
        }
    </script>
</body>
</html>
